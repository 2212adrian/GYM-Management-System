(()=>{const n=document.getElementById("starCanvas");if(!n)return;const a=n.getContext("2d",{alpha:!0});let l,c,h;const s=[],M=50,S=80,x=20,A=1.5,I=2e3;let f=!0,g=0,i=0,p=0;const R=1500,v=t=>1+(1.70158+1)*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2),T=t=>t===0?0:Math.pow(2,10*(t-1));function m(){h=Math.min(window.devicePixelRatio||1,A),l=window.innerWidth,c=window.innerHeight,n.width=l*h,n.height=c*h,n.style.width=l+"px",n.style.height=c+"px",n.style.position="fixed",n.style.top=0,n.style.left=0,n.style.zIndex=3,n.style.pointerEvents="none",a.setTransform(h,0,0,h,0,0),document.body.style.overflow="hidden"}function u(t=!0){let r,d=0;do r=Math.random()*c,d++;while(s.some(o=>Math.abs(o.y-r)<15)&&d<5);return{x:t?Math.random()*l:-Math.random()*50,y:r,r:Math.random()*1+.5,baseSpeed:Math.random()*.3+.15,glow:0}}function b(){s.length=0;for(let t=0;t<M;t++)s.push(u(!0))}function P(t){const r=i===1&&t-p<I;!f&&!r||s.length>=S||t-g<x||(s.push(u(!1)),g=t)}function y(t){a.clearRect(0,0,l,c),P(t);let r=0,d=0;if(i===1){const o=Math.min((t-p)/R,1),e=v(Math.min(o*1.1,1))*-3,w=T(o)*45;r=e+w,d=Math.min(1,o*1.2)}for(let o=s.length-1;o>=0;o--){const e=s[o],w=i===1?r:e.baseSpeed,W=0;if(e.x+=w,e.y+=W,e.x>l+50){f?s[o]=u(!1):i===1&&s.splice(o,1);continue}const _=Math.min(100,Math.abs(w)*4);e.glow=d,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(e.x-_,e.y),a.strokeStyle=`rgba(255,255,255,${.5+e.glow})`,a.lineWidth=e.r,a.shadowBlur=i===1?e.glow*12:0,a.shadowColor="#ffffff",a.stroke()}requestAnimationFrame(y)}m(),b(),requestAnimationFrame(y),window.addEventListener("resize",m),window.triggerStarWarp=()=>{i===0&&(f=!1,i=1,p=performance.now())}})();
