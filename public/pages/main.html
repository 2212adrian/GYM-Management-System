<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wolf OS - Terminal</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Frameworks -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Shell Security & Config -->
    <script>window.WOLF_INTERNAL_SHELL = true;</script>
    <script src="/assets/js/utils/system-config.js"></script>
    <script src="/assets/js/utils/auth-guard.js"></script> 

    <style>
        .htmx-fade-in.htmx-added { opacity: 0; }
        .htmx-fade-in { opacity: 1; transition: opacity 0.3s ease-out; }
    </style>
</head>
<body id="wolf-terminal">

    <div id="loading-overlay">
        <!-- 1. Star container for the first 2 seconds -->
        <div id="stars-container"></div>

        <!-- 2. The actual loading info screen -->
        <div id="loading-screen" style="display:none;">
            <div class="boot-logo">WOLF <span>OS</span></div>
            <div class="boot-spinner"></div>
            <div class="boot-status">INITIALIZING CORE SYSTEMS...</div>
        </div>
    </div>

    <div id="sidebar-backdrop"></div> 
    <div id="topbar-container"></div>
    <div id="sidebar-container"></div>

<!-- SYSTEM QR SCANNER (Hidden by default) -->

<div id="wolf-scanner-overlay" style="display:none;">
    <div class="scanner-ui-wrapper">
        <div class="scanner-header-bar">
            <div class="brand">SCAN <span>MODULE</span></div>
            <button id="exitScannerBtn" class="scanner-close-x"><i class='bx bx-x'></i></button>
        </div>

        <!-- Viewfinder -->
        <div class="viewfinder-container">
            <div id="reader"></div>
            <div class="viewfinder-frame">
                <div class="corner t-l"></div><div class="corner t-r"></div>
                <div class="corner b-l"></div><div class="corner b-r"></div>
                <div class="laser-line"></div>
            </div>
        </div>

        <!-- NEW: MANUAL INPUT AREA -->
        <div class="scanner-manual-area">
            <div class="manual-input-group">
                <input type="text" id="manualCodeInput" placeholder="MANUAL SYSTEM ID..." autocomplete="off">
                <button id="manualConfirmBtn" class="manual-btn-submit" style="opacity: 0; pointer-events: none;">
                    <i class='bx bx-subdirectory-left'></i>
                </button>
            </div>
            
            <button class="btn-guest-entry">
                <i class='bx bx-user-plus'></i> GUEST / WALK-IN CUSTOMER
            </button>
        </div>

        <div class="scanner-footer-status">
            <div class="pulse-dot"></div>
            <span>CAMERA ACTIVE | TERMINAL SECURE</span>
        </div>
    </div>
</div>

<!-- SCANNED DATA MODAL (Hidden by default) -->
<div id="scanResultModal" class="modal-overlay" style="display:none;">
    <div class="cyber-modal-container">
        <!-- Decoration Header -->
        <div class="cyber-modal-header">
            <i class='bx bx-scan'></i>
            <span>SYSTEM DECRYPTOR</span>
        </div>

        <div class="modal-content cyber-modal-box">
            <div class="brand">DATA <span>EXTRACTED</span></div>
            
            <div id="scan-data-body">
                <!-- Data will be injected here via JS -->
            </div>

            <div class="modal-actions-grid">
                <button class="btn-authorize" id="confirmScanBtn">
                    <i class='bx bx-check-shield'></i> AUTHORIZE
                </button>
                <button class="btn-rescan" id="cancelScanBtn">
                    <i class='bx bx-refresh'></i> RE-SCAN
                </button>
            </div>
        </div>
        
        <div class="modal-footer-glitch">ENCRYPTION: AES-256 | ACCESS LOGGED</div>
    </div>
</div>
    <div id="wolf-layout">
        <div id="sidebar-container"></div>
        <main id="main-content">
            <!-- DEFAULT WELCOME SCREEN -->
             <div class="version sys-full-version" style="color:var(--text-muted); font-size:10px; letter-spacing:2px; margin-top:5px;"></div>
                
                <p style="margin-top:30px; color:#444; font-size:12px; font-weight:bold; letter-spacing:1px;">
                    SYSTEM READY. AUTHORIZED ACCESS ONLY.
                </p>
             <div class="brand brand-container">WOLF <span>PALOMAR</span></div>
            <div id="page-wrapper" style="text-align:center; padding-top:150px;">
                <!-- Using brand-container to protect your CSS span styling -->
                 <!-- DO NOT ADD ANYTHING-->
            </div>
            
        </main>
    </div>

    <div id="nav-container"></div>

    <!-- UI Logic -->
    <script src="/assets/js/utils/audio-engine.js"></script>
    <script src="/assets/js/utils/supabase-init.js"></script>
    <script src="/assets/js/utils/ui-loader.js"></script>
    <script src="/assets/js/utils/data-loader.js"></script>
    <script src="/assets/js/utils/scanner.js"></script>

    <!-- Internal Security (Direct Access Redirect) -->
    <script>
       
    (function () {
        if (!window.WOLF_INTERNAL_SHELL) {
            document.documentElement.style.display = 'none';
            window.location.replace('/index.html');
        }
    })();
    </script>

    <!-- "Ghost" Footer (Versioning) -->
    <footer style="position:fixed; bottom:12px; width:100%; text-align:center; font-size:9px; color:#222; pointer-events:none; z-index:1; text-transform:uppercase; letter-spacing:1px;">
        <span class="sys-copyright"></span> | <span class="sys-version"></span>
    </footer>

</body>
</html>